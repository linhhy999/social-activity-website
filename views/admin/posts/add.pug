extends ../layout
block content
    .breadcomb-area
        .container
            .row
                .col-lg-12.col-md-12.col-sm-12.col-xs-12
                    .breadcomb-list
                        .row
                            .col-lg-6.col-md-6.col-sm-6.col-xs-12
                                .breadcomb-wp
                                    .breadcomb-icon
                                        i.notika-icon.notika-form
                                    .breadcomb-ctn
                                        h2 Thêm hoạt động
                                        p
                                            | Hoạt động > Thêm hoạt động

    // Noti zone
    .container
        .row
            .col-lg-12.col-md-12.col-sm-12.col-xs-12
                .errmessage(id="errorContainer")
                    p Vui lòng sửa những lỗi dưới đây và thử lại:
                    <ul/>

    .form-element-area
        .container
            .row
                .col-lg-12
                    .form-element-list
                        form#activityform(action="/admin/post/add" method="POST" enctype="multipart/form-data")
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                    i.notika-icon.notika-support
                                .nk-int-st
                                    #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                        label Tên Hoạt động 
                                            span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                        .input-group.nk-int-st
                                            input.form-control(type='text' name='activityName')
                            .row
                                .col-sm-4
                                    .form-group.ic-cmp-int.float-lb.floating-lb
                                        .form-ic-cmp
                                            i.notika-icon.notika-calendar
                                        .nk-int-st
                                            #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                                label Hạn cuối đăng ký 
                                                    span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                                input#datetimepicker1.form-control(type='text' name='register_deadline' )
                                .col-sm-4
                                    .form-group.ic-cmp-int.float-lb.floating-lb
                                        .form-ic-cmp
                                            i.notika-icon.notika-calendar
                                        .nk-int-st
                                            #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                                label Ngày bắt đầu 
                                                    span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                                input#datetimepicker2.form-control(type='text' name='startDate')
                                .col-sm-4
                                    .form-group.ic-cmp-int.float-lb.floating-lb
                                        .form-ic-cmp
                                            i.notika-icon.notika-calendar
                                        .nk-int-st
                                            #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                                label Ngày kết thúc 
                                                    span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                                input#datetimepicker3.form-control(type='text' name='endDate')
                            .row
                                .col-sm-6
                                    .form-group.ic-cmp-int.float-lb.floating-lb
                                        .form-ic-cmp
                                            i.notika-icon.notika-map
                                        .nk-int-st
                                            #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                                label Địa điểm nhận tập trung 
                                                    span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                                .input-group.nk-int-st
                                                    input.form-control(type='text' name="gathering_place")

                                .col-sm-6
                                    .form-group.ic-cmp-int.float-lb.floating-lb
                                        .form-ic-cmp
                                            i.notika-icon.notika-map
                                        .nk-int-st
                                            #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                                label Địa điểm di chuyển đến (nếu có)
                                                .input-group.nk-int-st
                                                    input.form-control(type='text' name='target_place')
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                    i.notika-icon.notika-star
                                .nk-int-st
                                    #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                        label Số ngày ctxh sẽ được hưởng (tối đa) 
                                            span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                        .input-group.nk-int-st
                                            input.form-control(type='number' step='0.5' name="benefit")
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                    i.notika-icon.notika-star
                                .nk-int-st
                                    #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                        label Số lượng tình nguyện viên cần tuyển 
                                            span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                        .input-group.nk-int-st
                                            input.form-control(type='number' name="numMember")
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                    i.notika-icon.notika-star
                                .nk-int-st
                                    #data_1.form-group.nk-datapk-ctm.form-elet-mg
                                        label Đơn vị tổ chức
                                        .input-group.nk-int-st
                                            input.form-control(type='text' name="orgUnit" disabled value=user.faculty)
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                .nk-int-st
                                    h4 Nội dung hoạt động 
                                        span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                    textarea#editor(name="content")
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                .nk-int-st
                                    label Người giám sát 
                                        span.freebirdFormviewerViewItemsItemRequiredAsterisk *
                                    .fm-checkbox
                                        .bootstrap-select
                                            select.selectpicker(name="superVisor" multiple)
                                                each sp in superVisors
                                                    option(value=sp._id)= sp.fullName
                            .form-group.ic-cmp-int.float-lb.floating-lb
                                .form-ic-cmp
                                    i.notika-icon.notika-start
                                h4 Hình ảnh
                                input(type="file", name="image" multiple)
                            .btn-demo-notika
                            .btn-list
                                button.btn.btn-success.notika-btn-default.btn-lg(type="submit") Thêm
                                a.btn.btn-danger.notika-btn-default.btn-lg(href="/admin/post/list") Hủy

block script
    script.
        $("#post")[0].classList.add("active")

    script(src='/assets/js/jasny-bootstrap.min.js')

    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/bower_components/moment/min/moment.min.js"></script>
    <script type="text/javascript" src="/bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="/bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />
    script(src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js")

    script.
        const datetimeformat = {
            format: 'DD/MM/YYYY HH:mm',
            minDate: moment(Date.now()),
            maxDate: moment(Date.now() + 10184000000),
        };
        $('#datetimepicker1').datetimepicker(datetimeformat);
        $('#datetimepicker2').datetimepicker(datetimeformat);
        $('#datetimepicker3').datetimepicker(datetimeformat);

    <!--  wave JS ============================================ -->
    script(src='/assets/js/wave/waves.min.js')
    script(src='/assets/js/wave/wave-active.js')

    script(src="/js/ckeditor.min.js")
    script.
        ClassicEditor.create(document.querySelector( '#editor' )).catch( error => {console.error( error );});
    script(src="/assets/js/bootstrap-select/bootstrap-select.js")
    script.
        $('select').selectpicker();

    script.
        $(document).ready(function() {
            $("#activityform").validate({
                rules: {
                    activityName: "required",
                    register_deadline: "required",
                    startDate: "required",
                    endDate: "required",
                    gathering_place: "required",
                    benefit: "required",
                    numMember: "required",
                    content: "required",
                    superVisor: "required",
                },
                messages: {
                    activityName: "Vui lòng nhập tên hoạt động",
                    register_deadline: "Vui lòng chọn hạn đăng ký",
                    startDate: "Vui lòng chọn ngày bắt đầu",
                    endDate: "Vui lòng chọn ngày kết thúc",
                    benefit: "Vui lòng nhập số ngày ctxh",
                    numMember: "Vui lòng nhập số lượng tình nguyện viên",
                    gathering_place: "Vui lòng nhập địa điểm tập trung",
                    content: "Vui lòng nhập nội dung hoạt động",
                    superVisor: "Vui lòng chọn ít nhất một người giám sát",
                },
                onfocusout: function(element) {$(element).valid();},
                errorContainer: $('#errorContainer'),
                errorLabelContainer: $('#errorContainer ul'),
                wrapper: 'li'
            });
        });
